(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{35:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=[];return Array.prototype.slice.call(arguments).forEach((function(t){if(t)switch(r(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push(""+t)}})),e.join(" ")}n.d(t,"a",(function(){return o}))},36:function(e,t,n){"use strict";var r=n(0);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=r.createElement("circle",{cx:15,cy:15,r:15,fill:"#C4C4C4"}),i=r.createElement("circle",{cx:70,cy:15,r:15,fill:"#C4C4C4"}),c=r.createElement("path",{fill:"#C4C4C4",d:"M35 0h15v30H35zM100 0h15l-15 30H85l15-30z"});t.a=function(e){return r.createElement("svg",o({width:115,height:30,fill:"none"},e),a,i,c)}},37:function(e,t,n){},38:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(7),i=n.n(a);n(37);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.875s",repeatCount:"indefinite"})),l=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(45 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"})),s=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(90 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.625s",repeatCount:"indefinite"})),f=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(135 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"})),d=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(180 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.375s",repeatCount:"indefinite"})),m=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(225 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"})),p=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(270 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.125s",repeatCount:"indefinite"})),y=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(315 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}));var v=function(e){return r.createElement("svg",c({style:{margin:"auto",background:"0 0"},width:40,height:40,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",display:"block"},e),u,l,s,f,d,m,p,y)},b=n(35),h=function(e){var t=e.onClick,n=e.isSending,r=e.isDisabled,a=e.className,i=e.children;return o.a.createElement("button",{type:"button",className:Object(b.a)("Button",a),onClick:function(){return t()},disabled:r},n?o.a.createElement(v,null):i)};h.propTypes={onClick:i.a.func,isSending:i.a.bool,isDisabled:i.a.bool,className:i.a.string,children:i.a.string},h.defaultProps={onClick:function(){},isSending:!1,isDisabled:!1,className:"",children:""};t.a=h},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=(n(40),n(2)),i=n(10),c=(n(41),n(36));function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=r.createElement("g",{opacity:.8,stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}));var s=function(e){return r.createElement("svg",u({width:24,height:24,fill:"none"},e),l)};function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=r.createElement("path",{d:"M6 1H3a2 2 0 00-2 2v3m18 0V3a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M1 14v3a2 2 0 002 2h3",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"});var m=function(e){return r.createElement("svg",f({width:20,height:20,fill:"none"},e),d)};function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y=r.createElement("path",{d:"M1 6h3a2 2 0 002-2V1m8 0v3a2 2 0 002 2h3m0 8h-3a2 2 0 00-2 2v3m-8 0v-3a2 2 0 00-2-2H1",stroke:"#0D0D0D",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"});var v=function(e){return r.createElement("svg",p({width:20,height:20,fill:"none"},e),y)};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(){var e=b(Object(r.useState)(!1),2),t=e[0],n=e[1],u=b(Object(r.useState)({email:"",sublogin:""}),2),l=u[0],f=u[1],d=Object(a.g)(),p=Object(i.c)((function(e){return e.sendsayBridge.sendsay}));var y=Object(r.useCallback)((function(){console.info(document.fullscreenElement),document.fullscreenElement?n(!0):n(!1)}),[document.fullscreenElement]);return Object(r.useEffect)((function(){return window.addEventListener("fullscreenchange",y,{passive:!1}),function(){window.removeEventListener("fullscreenchange",y,{passive:!1})}}),[y]),Object(r.useEffect)((function(){p.request({action:"pong"}).then((function(e){f({email:e.account,sublogin:e.sublogin!==e.account&&e.sublogin})})).catch((function(e){console.info("Header_Pong Err",e)}))}),[]),o.a.createElement("div",{className:"Header"},o.a.createElement("div",null,o.a.createElement(c.a,{className:"Header__logo"}),o.a.createElement("div",{className:"Header__title"},"API-консолька")),o.a.createElement("div",null,o.a.createElement("div",{className:"Header__info"},o.a.createElement("span",null,l.email),l.sublogin&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,":"),o.a.createElement("span",null,l.sublogin))),o.a.createElement("button",{type:"button",className:"Header__logout",onClick:function(){p.request({action:"logout"}).then((function(){d.push("/")})).catch((function(e){console.info("logout Err",e)}))}},o.a.createElement("div",{className:"Header__logoutText"},"Выйти"),o.a.createElement(s,{className:"Header__logoutIcon"})),o.a.createElement("button",{className:"Header__fullscreen",type:"button",onClick:function(){return e=document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement,t=document.documentElement,void(e?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen());var e,t}},t?o.a.createElement(v,null):o.a.createElement(m,null))))};E.propTypes={},E.defaultProps={};var g=E;n(42);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=r.createElement("g",{opacity:.8,stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"},r.createElement("path",{d:"M3 3l18 18M21 3L3 21"}));var j=function(e){return r.createElement("svg",O({width:24,height:24,fill:"none"},e),w)},_=n(7),S=n.n(_),k=(n(43),n(35));function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=r.createElement("circle",{cx:2,cy:2,r:2}),T=r.createElement("circle",{cx:2,cy:9,r:2}),x=r.createElement("circle",{cx:2,cy:16,r:2});var A=function(e){return r.createElement("svg",N({width:4,height:18,fill:"none"},e),C,T,x)};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.isSuccess,n=e.action,a=e.content,c=e.id,u=e.serverResponse,l=I(Object(r.useState)(!1),2),s=l[0],f=l[1],d=Object(r.useRef)(null),m=Object(i.b)(),p=Object(i.c)((function(e){return e.copiedAction.id}));return Object(r.useEffect)((function(){p===c&&(f(!0),m({type:"COPY_ACTION",payload:{id:""}}))}),[p]),Object(r.useEffect)((function(){s&&setTimeout((function(){f(!1)}),2e3)}),[s]),o.a.createElement("div",{className:"HistoryTrackItem",ref:d,onClick:function(){m({type:"SET_ACTION",payload:{action:a,serverResponse:u}})}},o.a.createElement("div",{className:"HistoryTrackItem__content"},s&&o.a.createElement("div",{className:"HistoryTrackItem__copyAccepted"},"Скопировано"),o.a.createElement("div",{className:Object(k.a)("HistoryTrackItem__dot",t?"HistoryTrackItem__dot--success":"HistoryTrackItem__dot--failed")}),o.a.createElement("div",{className:"HistoryTrackItem__action"},n),o.a.createElement(A,{className:"HistoryTrackItem__dragElement",onClick:function(e){return function(e){e.stopPropagation(),d.current.scrollIntoView({block:"end",behavior:"smooth"}),setTimeout((function(){var e,t;t=d.current.getBoundingClientRect().y+35,e=d.current.getBoundingClientRect().right-133,m({type:"TOGGLE_DROPDOWN",payload:{isOpen:!0,x:e,y:t,action:n,content:a,id:c}})}),1)}(e)}})))};H.propTypes={isSuccess:S.a.bool.isRequired,action:S.a.string.isRequired,id:S.a.string.isRequired,content:S.a.string.isRequired,serverResponse:S.a.string},H.defaultProps={response:""};var D=H;function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(){var e=Object(r.useRef)(null),t=Object(i.b)(),n=Object(i.c)((function(e){return e.userInfo})),a=F(Object(r.useState)([]),2),c=a[0],u=a[1];Object(r.useEffect)((function(){var e=n.actions.map((function(e){return o.a.createElement(D,{key:e.id,isSuccess:e.isSuccess,serverResponse:e.response,action:e.action,id:e.id,content:e.content})}));u(e.reverse())}),[n]);return o.a.createElement("div",{className:"HistoryTrack"},o.a.createElement("div",{className:"HistoryTrack__actions",ref:e,onWheel:function(t){e.current.scrollTo({top:0,left:e.current.scrollLeft+t.deltaY,behaviour:"smooth"})}},c),o.a.createElement("button",{className:"HistoryTrack__close",onClick:function(){t({type:"UPDATE_USER_INFO",payload:{actions:[]}})}},o.a.createElement(j,null)))};L.propTypes={},L.defaultProps={};var M=L;n(44);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(){var e=Object(i.c)((function(e){return e.dropdownData})),t=Object(i.c)((function(e){return e.userInfo})),n=Object(i.b)(),a=Object(r.useRef)(null),c=q(Object(r.useState)(!1),2),u=c[0],l=c[1],s=Object(r.useCallback)((function(){e.isOpen&&n({type:"TOGGLE_DROPDOWN",payload:{isOpen:!1}})}),[e.isOpen]);return Object(r.useEffect)((function(){return window.addEventListener("click",s,{passive:!1}),function(){window.removeEventListener("click",s,{passive:!1})}}),[s]),Object(r.useEffect)((function(){e.isOpen&&(e.y+150>window.innerHeight?l(!0):l(!1),a.current.getBoundingClientRect().x<15&&n({type:"TOGGLE_DROPDOWN",payload:{x:15}}),a.current.getBoundingClientRect().right+15>window.innerWidth&&n({type:"TOGGLE_DROPDOWN",payload:{x:window.innerWidth-50-133}}))}),[e]),o.a.createElement("div",{className:Object(k.a)("Dropdown",!e.isOpen&&"Dropdown--hidden",u&&"Dropdown--reversed"),style:{left:"".concat(e.x,"px"),top:"".concat(e.y,"px")},ref:a},o.a.createElement("div",{className:"Dropdown__item",onClick:function(){n({type:"EXEC_ACTION",payload:{action:e.content}})}},"Выполнить"),o.a.createElement("div",{className:"Dropdown__item",onClick:function(){return t=e.content,r=document.createElement("textarea"),document.body.appendChild(r),r.value=t,r.select(),document.execCommand("copy"),document.body.removeChild(r),void n({type:"COPY_ACTION",payload:{id:e.id}});var t,r}},"Скопировать"),o.a.createElement("div",{className:Object(k.a)("Dropdown__item Dropdown__item--delete",u&&"Dropdown__item--reversed"),onClick:function(){for(var r=t.actions,o=0;o<r.length;o+=1)if(r[o].id===e.id){r.splice(o,1);break}n({type:"UPDATE_USER_INFO",payload:{actions:r}})}},"Удалить"))};U.propTypes={},U.defaultProps={};var G=U,z=(n(45),n(38));function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=r.createElement("g",{opacity:.8},r.createElement("path",{d:"M21 10H7M11 6H3M12 14H7M7 18H3"}));var $=function(e){return r.createElement("svg",B({width:24,height:24,fill:"none"},e),J)},X={actionsIDinStorage:"APIHistoryTrack",fieldWidthIDinStorage:"FieldWidth",maxActionsInHistory:15};function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=Object(r.useRef)(null),c=Object(r.useRef)(null),u=Y(Object(r.useState)(!1),2),l=u[0],s=u[1],f=Y(Object(r.useState)(!1),2),d=f[0],m=f[1],p=Y(Object(r.useState)(!1),2),y=p[0],v=p[1],b=Y(Object(r.useState)(!1),2),h=b[0],E=b[1],g=Object(i.c)((function(e){return e.sendsayBridge.sendsay})),O=Object(i.c)((function(e){return e.userInfo.actions})),w=Object(i.c)((function(e){return e.execAction})),j=Object(i.c)((function(e){return e.setAction})),_=Object(i.b)();function S(e){var t;if(t=e.replace(/\n/g,"").replace(/([{,])(\s*)([A-Za-z0-9_\\-]+?)\s*:/g,'$1"$3":').replace(/'/g,'"'),"object"!==V(t=JSON.parse(t)))throw new Error("Request error: text is not object");return t}function N(e,t){for(var n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;switch(V(e[n])){case"object":if(!Object.compare(e[n],t[n]))return!1;break;case"function":if(void 0===t[n]||"compare"!==n&&e[n].toString()!==t[n].toString())return!1;break;default:if(e[n]!==t[n])return!1}}for(var r in t)if(void 0===e[r])return!1;return!0}function C(e){if(!h&&e){var t;E(!0);var r,o=!1;try{t=S(e)}catch(e){return console.error(e),m(!0),void E(!1)}g.request(t).then((function(e){n.current.value=JSON.stringify(e,void 0,4),o=!0})).catch((function(e){n.current.value=JSON.stringify(e,void 0,4),r=JSON.stringify(e,void 0,4),v(!0)})).finally((function(){for(var e=O,n=0;n<e.length;n+=1)if(N(JSON.parse(e[n].content),t)){e.splice(n,1);break}e.push({action:t.action,isSuccess:o,id:Math.random().toString(36).substr(2,9),content:JSON.stringify(t,void 0,4),response:r}),e.length>X.maxActionsInHistory&&e.splice(0,1),_({type:"UPDATE_USER_INFO",payload:{actions:e}}),E(!1)}))}}Object(r.useEffect)((function(){w.action&&(t.current.value=w.action,j.serverResponse?(n.current.value=j.serverResponse,v(!0)):(n.current.value="",v(!1)),C(w.action),_({type:"EXEC_ACTION",payload:{action:""}}))}),[w]),Object(r.useEffect)((function(){j.action&&(t.current.value=j.action,j.serverResponse?(n.current.value=j.serverResponse,v(!0)):(n.current.value="",v(!1)),_({type:"SET_ACTION",payload:{action:""}}))}),[j]),Object(r.useEffect)((function(){g.request({action:"sys.storage.get",id:X.fieldWidthIDinStorage}).then((function(t){e.current.style.width="".concat(a.current.offsetWidth*t.obj.data.widthRatio,"px"),e.current.style.flexGrow=0})).catch((function(e){return console.info("Error when fetch data",e)}))}),[]);var T=Object(r.useCallback)((function(e){c.current.contains(e.target)&&s(!0)}),[]),x=Object(r.useCallback)((function(t){if(!l)return!1;var n=(t.clientX?t.clientX:t.touches[0].clientX)-a.current.offsetLeft;e.current.style.width="".concat(Math.max(60,n-8),"px"),e.current.style.flexGrow=0}),[l]),I=Object(r.useCallback)((function(){s(!1),g.request({action:"sys.storage.set",id:X.fieldWidthIDinStorage,obj:{data:{widthRatio:e.current.offsetWidth/a.current.offsetWidth}},return_fresh_obj:0}).catch((function(e){return console.info("Error when set data in storage",e)}))}),[]);return Object(r.useEffect)((function(){return window.addEventListener("mousemove",x,{passive:!1}),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("mouseup",I,{passive:!1}),window.addEventListener("touchend",I,{passive:!1}),function(){window.removeEventListener("mousemove",x,{passive:!1}),window.removeEventListener("touchmove",x,{passive:!1}),window.removeEventListener("mouseup",I,{passive:!1}),window.removeEventListener("touchend",I,{passive:!1})}}),[x]),o.a.createElement("div",{className:"Editor"},o.a.createElement("div",{className:"Editor__wrapper",ref:a},o.a.createElement("div",{className:"Editor__field",ref:e},o.a.createElement("div",{className:Object(k.a)("Editor__title",d&&"Editor__title--failed")},"Запрос:"),o.a.createElement("textarea",{className:Object(k.a)("Editor__entry",d&&"Editor__entry--failed"),ref:t,onChange:function(){d&&m(!1),y&&v(!1)}})),o.a.createElement("div",{className:"Editor__drag",ref:c,onMouseDown:T,onMouseUp:I,onTouchStart:T,onTouchEnd:I},o.a.createElement(A,null)),o.a.createElement("div",{className:"Editor__field"},o.a.createElement("div",{className:Object(k.a)("Editor__title",y&&"Editor__title--failed")},"Ответ:"),o.a.createElement("textarea",{disabled:!0,className:Object(k.a)("Editor__entry",y&&"Editor__entry--failed"),ref:n}))),o.a.createElement("div",{className:"Editor__footer"},o.a.createElement("div",{className:"Editor__footerContent"},o.a.createElement(z.a,{type:"button",onClick:function(){return C(t.current.value)},isSending:h},"Отправить"),o.a.createElement("a",{href:"https://github.com/ToTheHit",className:"Editor__github"},"@ToTheHit"),o.a.createElement("button",{type:"button",className:"Editor__format",onClick:function(){!function(){var e;if(t.current.value){try{e=JSON.stringify(S(t.current.value),void 0,4)}catch(e){return console.error(e),void m(!0)}t.current.value=e}}()}},o.a.createElement($,{className:"Editor__icon"}),o.a.createElement("span",{className:"Editor__formatText"},"Форматировать")))))};K.propTypes={},K.defaultProps={};var Q=K,ee=function(e){var t=Object(a.g)(),n=Object(i.b)(),c=Object(i.c)((function(e){return e.sendsayBridge.sendsay})),u=Object(i.c)((function(e){return e.userInfo}));return Object(r.useEffect)((function(){c.setSessionFromCookie("sendsay_session"),c.request({action:"pong"}).catch((function(e){console.info("pongErr",e),t.push("/")})).then((function(){var e=[];c.request({action:"sys.storage.get",id:X.actionsIDinStorage}).then((function(t){e=t.obj.data})).catch((function(e){return console.info("Error when fetch data",e)})).finally((function(){n({type:"UPDATE_USER_INFO",payload:{actions:e.length?e:[],isUpdatedFromServer:!0}})}))}))}),[]),Object(r.useEffect)((function(){u.isUpdatedFromServer&&c.request({action:"sys.storage.set",id:X.actionsIDinStorage,obj:{data:u.actions},return_fresh_obj:0}).catch((function(e){return console.info("Error when set data in storage",e)}))}),[u]),o.a.createElement("div",{className:"Work"},o.a.createElement(G,null),o.a.createElement(g,null),o.a.createElement(M,null),o.a.createElement(Q,null))};ee.propTypes={},ee.defaultProps={};t.default=ee}}]);