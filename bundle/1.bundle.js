(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{35:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){var e=[];return Array.prototype.slice.call(arguments).forEach((function(t){if(t)switch(r(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push(""+t)}})),e.join(" ")}n.d(t,"a",(function(){return a}))},36:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(7),i=n.n(o),c=(n(37),function(e){var t=e.className;return a.a.createElement("div",{className:"Logo ".concat(t)},a.a.createElement("div",{className:"Logo__circle"}),a.a.createElement("div",{className:"Logo__rectangle"}),a.a.createElement("div",{className:"Logo__circle"}),a.a.createElement("div",{className:"Logo__rectangle Logo__rectangle--skew"}))});c.propTypes={className:i.a.string},c.defaultProps={className:""},t.a=c},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(7),i=n.n(o);n(38);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.875s",repeatCount:"indefinite"})),u=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(45 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"})),s=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(90 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.625s",repeatCount:"indefinite"})),f=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(135 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"})),d=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(180 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.375s",repeatCount:"indefinite"})),m=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(225 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"})),y=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(270 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.125s",repeatCount:"indefinite"})),p=r.createElement("rect",{x:48,y:24.5,rx:2,ry:2.64,width:4,height:11,fill:"#fff",transform:"rotate(315 50 50)"},r.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}));var b=function(e){return r.createElement("svg",c({style:{margin:"auto",background:"0 0"},width:40,height:40,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",display:"block"},e),l,u,s,f,d,m,y,p)},v=n(35),h=function(e){var t=e.onClick,n=e.isSending,r=e.isDisabled,o=e.className,i=e.children;return a.a.createElement("button",{type:"button",className:Object(v.a)("Button",o),onClick:function(){return t()},disabled:r},n?a.a.createElement(b,null):i)};h.propTypes={onClick:i.a.func,isSending:i.a.bool,isDisabled:i.a.bool,className:i.a.string,children:i.a.string},h.defaultProps={onClick:function(){},isSending:!1,isDisabled:!1,className:"",children:""};t.a=h},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=(n(41),n(2)),i=n(10),c=(n(42),n(36));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=r.createElement("g",{opacity:.8,stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}));var s=function(e){return r.createElement("svg",l({width:24,height:24,fill:"none"},e),u)};function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=r.createElement("path",{d:"M6 1H3a2 2 0 00-2 2v3m18 0V3a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M1 14v3a2 2 0 002 2h3",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"});var m=function(e){return r.createElement("svg",f({width:20,height:20,fill:"none"},e),d)};function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=r.createElement("path",{d:"M1 6h3a2 2 0 002-2V1m8 0v3a2 2 0 002 2h3m0 8h-3a2 2 0 00-2 2v3m-8 0v-3a2 2 0 00-2-2H1",stroke:"#0D0D0D",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"});var b=function(e){return r.createElement("svg",y({width:20,height:20,fill:"none"},e),p)};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(){var e=v(Object(r.useState)(!1),2),t=e[0],n=e[1],l=v(Object(r.useState)({email:"",sublogin:""}),2),u=l[0],f=l[1],d=Object(o.g)(),y=Object(i.c)((function(e){return e.sendsayBridge.sendsay}));var p=Object(r.useCallback)((function(){console.info(document.fullscreenElement),document.fullscreenElement?n(!0):n(!1)}),[document.fullscreenElement]);return Object(r.useEffect)((function(){return window.addEventListener("fullscreenchange",p,{passive:!1}),function(){window.removeEventListener("fullscreenchange",p,{passive:!1})}}),[p]),Object(r.useEffect)((function(){y.request({action:"pong"}).then((function(e){f({email:e.account,sublogin:e.sublogin!==e.account&&e.sublogin})})).catch((function(e){console.info("Header_Pong Err",e)}))}),[]),a.a.createElement("div",{className:"Header"},a.a.createElement("div",null,a.a.createElement(c.a,{className:"Header__logo"}),a.a.createElement("div",{className:"Header__title"},"API-консолька")),a.a.createElement("div",null,a.a.createElement("div",{className:"Header__info"},a.a.createElement("span",null,u.email),u.sublogin&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,":"),a.a.createElement("span",null,u.sublogin))),a.a.createElement("button",{type:"button",className:"Header__logout",onClick:function(){y.request({action:"logout"}).then((function(){d.push("/")})).catch((function(e){console.info("logout Err",e)}))}},a.a.createElement("div",{className:"Header__logoutText"},"Выйти"),a.a.createElement(s,{className:"Header__logoutIcon"})),a.a.createElement("button",{className:"Header__fullscreen",type:"button",onClick:function(){return e=document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement,t=document.documentElement,void(e?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen());var e,t}},t?a.a.createElement(b,null):a.a.createElement(m,null))))};E.propTypes={},E.defaultProps={};var g=E;n(43);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w=r.createElement("g",{opacity:.8,stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"},r.createElement("path",{d:"M3 3l18 18M21 3L3 21"}));var _=function(e){return r.createElement("svg",O({width:24,height:24,fill:"none"},e),w)},j=n(7),S=n.n(j),k=(n(44),n(35));function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T=r.createElement("circle",{cx:2,cy:2,r:2}),C=r.createElement("circle",{cx:2,cy:9,r:2}),x=r.createElement("circle",{cx:2,cy:16,r:2});var A=function(e){return r.createElement("svg",N({width:4,height:18,fill:"none"},e),T,C,x)};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.isSuccess,n=e.action,o=e.content,c=e.id,l=I(Object(r.useState)(!1),2),u=l[0],s=l[1],f=Object(r.useRef)(null),d=Object(i.b)(),m=Object(i.c)((function(e){return e.copiedAction.id}));return Object(r.useEffect)((function(){m===c&&(s(!0),d({type:"COPY_ACTION",payload:{id:""}}))}),[m]),Object(r.useEffect)((function(){u&&setTimeout((function(){s(!1)}),2e3)}),[u]),a.a.createElement("div",{className:"HistoryTrackItem",ref:f,onClick:function(){d({type:"SET_ACTION",payload:{action:o}})}},a.a.createElement("div",{className:"HistoryTrackItem__content"},u&&a.a.createElement("div",{className:"HistoryTrackItem__copyAccepted"},"Скопировано"),a.a.createElement("div",{className:Object(k.a)("HistoryTrackItem__dot",t?"HistoryTrackItem__dot--success":"HistoryTrackItem__dot--failed")}),a.a.createElement("div",{className:"HistoryTrackItem__action"},n),a.a.createElement(A,{className:"HistoryTrackItem__dragElement",onClick:function(e){return function(e){e.stopPropagation(),f.current.scrollIntoView({block:"end",behavior:"smooth"}),setTimeout((function(){var e,t;t=f.current.getBoundingClientRect().y+35,e=f.current.getBoundingClientRect().right-133,d({type:"TOGGLE_DROPDOWN",payload:{isOpen:!0,x:e,y:t,action:n,content:o,id:c}})}),1)}(e)}})))};H.propTypes={isSuccess:S.a.bool.isRequired,action:S.a.string.isRequired,id:S.a.string.isRequired,content:S.a.string.isRequired},H.defaultProps={};var L=H;function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=function(){var e=Object(r.useRef)(null),t=Object(i.b)(),n=Object(i.c)((function(e){return e.userInfo})),o=R(Object(r.useState)([]),2),c=o[0],l=o[1];Object(r.useEffect)((function(){var e=n.actions.map((function(e){return a.a.createElement(L,{key:e.id,isSuccess:e.isSuccess,action:e.action,id:e.id,content:e.content})}));l(e.reverse())}),[n]);return a.a.createElement("div",{className:"HistoryTrack"},a.a.createElement("div",{className:"HistoryTrack__actions",ref:e,onWheel:function(t){e.current.scrollTo({top:0,left:e.current.scrollLeft+t.deltaY,behaviour:"smooth"})}},c),a.a.createElement("button",{className:"HistoryTrack__close",onClick:function(){t({type:"UPDATE_USER_INFO",payload:{actions:[]}})}},a.a.createElement(_,null)))};P.propTypes={},P.defaultProps={};var M=P;n(45);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(){var e=Object(i.c)((function(e){return e.dropdownData})),t=Object(i.c)((function(e){return e.userInfo})),n=Object(i.b)(),o=Object(r.useRef)(null),c=q(Object(r.useState)(!1),2),l=c[0],u=c[1],s=Object(r.useCallback)((function(){e.isOpen&&n({type:"TOGGLE_DROPDOWN",payload:{isOpen:!1}})}),[e.isOpen]);return Object(r.useEffect)((function(){return window.addEventListener("click",s,{passive:!1}),function(){window.removeEventListener("click",s,{passive:!1})}}),[s]),Object(r.useEffect)((function(){e.isOpen&&(e.y+150>window.innerHeight?u(!0):u(!1),o.current.getBoundingClientRect().x<15&&n({type:"TOGGLE_DROPDOWN",payload:{x:15}}),o.current.getBoundingClientRect().right+15>window.innerWidth&&n({type:"TOGGLE_DROPDOWN",payload:{x:window.innerWidth-50-133}}))}),[e]),a.a.createElement("div",{className:Object(k.a)("Dropdown",!e.isOpen&&"Dropdown--hidden",l&&"Dropdown--reversed"),style:{left:"".concat(e.x,"px"),top:"".concat(e.y,"px")},ref:o},a.a.createElement("div",{className:"Dropdown__item",onClick:function(){n({type:"EXEC_ACTION",payload:{action:e.content}})}},"Выполнить"),a.a.createElement("div",{className:"Dropdown__item",onClick:function(){return t=e.content,r=document.createElement("textarea"),document.body.appendChild(r),r.value=t,r.select(),document.execCommand("copy"),document.body.removeChild(r),void n({type:"COPY_ACTION",payload:{id:e.id}});var t,r}},"Скопировать"),a.a.createElement("div",{className:Object(k.a)("Dropdown__item Dropdown__item--delete",l&&"Dropdown__item--reversed"),onClick:function(){for(var r=t.actions,a=0;a<r.length;a+=1)if(r[a].id===e.id){r.splice(a,1);break}n({type:"UPDATE_USER_INFO",payload:{actions:r}})}},"Удалить"))};U.propTypes={},U.defaultProps={};var G=U,B=(n(46),n(39));function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z=r.createElement("g",{opacity:.8},r.createElement("path",{d:"M21 10H7M11 6H3M12 14H7M7 18H3"}));var $=function(e){return r.createElement("svg",J({width:24,height:24,fill:"none"},e),z)},X={actionsIDinStorage:"APIHistoryTrack",fieldWidthIDinStorage:"FieldWidth",maxActionsInHistory:15};function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null),o=Y(Object(r.useState)(!1),2),c=o[0],l=o[1],u=Y(Object(r.useState)(!1),2),s=u[0],f=u[1],d=Y(Object(r.useState)(!1),2),m=d[0],y=d[1],p=Y(Object(r.useState)(""),2),b=p[0],v=p[1],h=Y(Object(r.useState)(""),2),E=h[0],g=h[1],O=Y(Object(r.useState)(!1),2),w=O[0],_=O[1],j=Object(i.c)((function(e){return e.sendsayBridge.sendsay})),S=Object(i.c)((function(e){return e.userInfo.actions})),N=Object(i.c)((function(e){return e.execAction})),T=Object(i.c)((function(e){return e.setAction})),C=Object(i.b)();function x(e){var t;if(t=e.replace(/\n/g,"").replace(/([{,])(\s*)([A-Za-z0-9_\\-]+?)\s*:/g,'$1"$3":').replace(/'/g,'"'),"object"!==V(t=JSON.parse(t)))throw new Error("Request error: text is not object");return t}function I(e,t){for(var n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;switch(V(e[n])){case"object":if(!Object.compare(e[n],t[n]))return!1;break;case"function":if(void 0===t[n]||"compare"!==n&&e[n].toString()!==t[n].toString())return!1;break;default:if(e[n]!==t[n])return!1}}for(var r in t)if(void 0===e[r])return!1;return!0}function D(e){if(!w&&(_(!0),e)){var t,n,r=!1;try{t=x(e)}catch(e){return console.error(e),f(!0),void _(!1)}j.request(t).then((function(e){g(JSON.stringify(e,void 0,4)),r=!0})).catch((function(e){g(JSON.stringify(e,void 0,4)),n=JSON.stringify(e,void 0,4),y(!0)})).finally((function(){for(var e=S,a=0;a<e.length;a+=1)if(I(JSON.parse(e[a].content),t)){e.splice(a,1);break}e.push({action:t.action,isSuccess:r,id:Math.random().toString(36).substr(2,9),content:JSON.stringify(t,void 0,4),response:n}),e.length>X.maxActionsInHistory&&e.splice(0,1),C({type:"UPDATE_USER_INFO",payload:{actions:e}}),_(!1)}))}}Object(r.useEffect)((function(){N.action&&(v(N.action),D(N.action),C({type:"EXEC_ACTION",payload:{action:""}}))}),[N]),Object(r.useEffect)((function(){T.action&&(v(T.action),C({type:"SET_ACTION",payload:{action:""}}))}),[T]),Object(r.useEffect)((function(){j.request({action:"sys.storage.get",id:X.fieldWidthIDinStorage}).then((function(n){e.current.style.width="".concat(t.current.offsetWidth*n.obj.data.widthRatio,"px"),e.current.style.flexGrow=0})).catch((function(e){return console.info("Error when fetch data",e)}))}),[]);var H=Object(r.useCallback)((function(e){n.current.contains(e.target)&&l(!0)}),[]),L=Object(r.useCallback)((function(n){if(!c)return!1;var r=(n.clientX?n.clientX:n.touches[0].clientX)-t.current.offsetLeft;e.current.style.width="".concat(Math.max(60,r-8),"px"),e.current.style.flexGrow=0}),[c]),R=Object(r.useCallback)((function(){l(!1),j.request({action:"sys.storage.set",id:X.fieldWidthIDinStorage,obj:{data:{widthRatio:e.current.offsetWidth/t.current.offsetWidth}},return_fresh_obj:0}).catch((function(e){return console.info("Error when set data in storage",e)}))}),[]);return Object(r.useEffect)((function(){return window.addEventListener("mousemove",L,{passive:!1}),window.addEventListener("touchmove",L,{passive:!1}),window.addEventListener("mouseup",R,{passive:!1}),window.addEventListener("touchend",R,{passive:!1}),function(){window.removeEventListener("mousemove",L,{passive:!1}),window.removeEventListener("touchmove",L,{passive:!1}),window.removeEventListener("mouseup",R,{passive:!1}),window.removeEventListener("touchend",R,{passive:!1})}}),[L]),Object(r.useEffect)((function(){s&&f(!1),m&&y(!1)}),[b]),a.a.createElement("div",{className:"Editor"},a.a.createElement("div",{className:"Editor__wrapper",ref:t},a.a.createElement("div",{className:"Editor__field",ref:e},a.a.createElement("div",{className:Object(k.a)("Editor__title",s&&"Editor__title--failed")},"Запрос:"),a.a.createElement("textarea",{className:Object(k.a)("Editor__entry",s&&"Editor__entry--failed"),value:b,onChange:function(e){v(e.target.value)}})),a.a.createElement("div",{className:"Editor__drag",ref:n,onMouseDown:H,onMouseUp:R,onTouchStart:H,onTouchEnd:R},a.a.createElement(A,null)),a.a.createElement("div",{className:"Editor__field"},a.a.createElement("div",{className:Object(k.a)("Editor__title",m&&"Editor__title--failed")},"Ответ:"),a.a.createElement("textarea",{disabled:!0,className:Object(k.a)("Editor__entry",m&&"Editor__entry--failed"),value:E,onChange:function(e){g(e.target.value)}}))),a.a.createElement("div",{className:"Editor__footer"},a.a.createElement("div",{className:"Editor__footerContent"},a.a.createElement(B.a,{type:"button",onClick:function(){return D(b)},isSending:w},"Отправить"),a.a.createElement("a",{href:"https://github.com/ToTheHit",className:"Editor__github"},"@ToTheHit"),a.a.createElement("button",{type:"button",className:"Editor__format",onClick:function(){!function(){var e;if(b){try{e=JSON.stringify(x(b),void 0,4)}catch(e){return console.error(e),void f(!0)}v(e)}}()}},a.a.createElement($,{className:"Editor__icon"}),a.a.createElement("span",{className:"Editor__formatText"},"Форматировать")))))};K.propTypes={},K.defaultProps={};var Q=K,ee=function(e){var t=Object(o.g)(),n=Object(i.b)(),c=Object(i.c)((function(e){return e.sendsayBridge.sendsay})),l=Object(i.c)((function(e){return e.userInfo}));return Object(r.useEffect)((function(){c.setSessionFromCookie("sendsay_session"),c.request({action:"pong"}).catch((function(e){console.info("pongErr",e),t.push("/")})).then((function(){var e=[];c.request({action:"sys.storage.get",id:X.actionsIDinStorage}).then((function(t){e=t.obj.data})).catch((function(e){return console.info("Error when fetch data",e)})).finally((function(){n({type:"UPDATE_USER_INFO",payload:{actions:e.length?e:[],isUpdatedFromServer:!0}})}))}))}),[]),Object(r.useEffect)((function(){l.isUpdatedFromServer&&c.request({action:"sys.storage.set",id:X.actionsIDinStorage,obj:{data:l.actions},return_fresh_obj:0}).catch((function(e){return console.info("Error when set data in storage",e)}))}),[l]),a.a.createElement("div",{className:"Work"},a.a.createElement(G,null),a.a.createElement(g,null),a.a.createElement(M,null),a.a.createElement(Q,null))};ee.propTypes={},ee.defaultProps={};t.default=ee}}]);